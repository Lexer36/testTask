-- FUNCTION: shema.test_notify()

-- DROP FUNCTION IF EXISTS shema.test_notify();

CREATE OR REPLACE FUNCTION shema.test_notify()
    RETURNS trigger
    LANGUAGE 'plpgsql'
    COST 100
    VOLATILE NOT LEAKPROOF
AS $BODY$
    BEGIN
        NOTIFY mymessage, 'fired by NOTIFY';
        RETURN NULL;
    END; 
$BODY$;

ALTER FUNCTION shema.test_notify()
    OWNER TO alex;

-- Trigger: notify_qt

-- DROP TRIGGER IF EXISTS notify_qt ON shema."TEST";

CREATE TRIGGER notify_qt
    AFTER INSERT
    ON shema."TEST"
    FOR EACH ROW
    EXECUTE FUNCTION shema.test_notify();
